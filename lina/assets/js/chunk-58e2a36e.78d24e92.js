(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58e2a36e"],{b662:function(e,s,t){"use strict";t.r(s);var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("GenericDetailPage",{attrs:{url:e.url,submenu:e.submenu,object:e.sessionData,"active-menu":e.activeSubMenu,"has-right-side":!1,"get-object-name":e.getSessionName},on:{"update:object":function(s){e.sessionData=s},"update:activeMenu":function(s){e.activeSubMenu=s},"update:active-menu":function(s){e.activeSubMenu=s}}},[t("keep-alive",[t(e.activeSubMenu,{tag:"component",attrs:{object:e.sessionData}})],1)],1)},i=[],a=t("cd4a"),o=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:16,sm:24}},[t("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})],1)],1)},r=[],c=t("579c"),l=t("d58a"),u=t("cf45"),d={name:"SessionCommands",components:{ListTable:c["a"]},data:function(){return{tableConfig:{hasSelection:!1,url:"/api/v1/terminal/commands/?session_id=".concat(this.$route.params.id),columns:["expandCol","index","input","timestamp"],columnsMeta:{expandCol:{type:"expand",formatter:l["a"]},index:{type:"index",label:"ID",sortable:"custom"},input:{label:this.$t("sessions.command"),sortable:"custom"},timestamp:{label:this.$t("sessions.date"),width:"160px",sortable:"custom",formatter:function(e){return Object(u["q"])(1e3*e.timestamp)}}}},headerActions:{hasExport:!1,hasImport:!1,hasRefresh:!1,hasCreate:!1,hasBulkDelete:!1,hasBulkUpdate:!1,hasLeftActions:!1,hasSearch:!1,hasRightActions:!1}}}},m=d,h=t("2877"),p=Object(h["a"])(m,o,r,!1,null,"5e5e2c44",null),f=p.exports,b=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{md:14,sm:24}},[e.object?t("DetailCard",{attrs:{items:e.detailItems}}):e._e()],1),e._v(" "),t("el-col",{attrs:{md:10,sm:24}},[e.object?t("QuickActions",{attrs:{type:"primary",actions:e.quickActions}}):e._e()],1)],1)},v=[],_=t("b97b"),y=t("8c34"),g=t("d952"),w={name:"SessionDetailInfo",components:{DetailCard:_["a"],QuickActions:y["a"]},props:{object:{type:Object,default:null}},data:function(){return{session:this.object}},computed:{onlineSessionActions:function(){var e=this;return[{title:this.$t("sessions.sessionTerminate"),attrs:{type:"danger",label:this.$t("sessions.terminate"),disabled:!this.session["can_terminate"]||!e.$hasPerm("terminal.terminate_session")},callbacks:{click:function(){Object(g["g"])(e.session.id).then((function(s){var t=e.$t("sessions.TerminateTaskSendSuccessMsg");e.$message.success(t),window.setTimeout((function(){window.location.reload()}),5e4)}))}}},{title:this.$t("sessions.sessionMonitor"),attrs:{type:"primary",label:this.$t("sessions.Monitor"),disabled:!this.session["can_join"]||!e.$hasPerm("terminal.monitor_session")},callbacks:{click:function(){var s="/luna/monitor/"+e.session.id;window.open(s,"height=600, width=800, top=400, left=400, toolbar=no, menubar=no, scrollbars=no, location=no, status=no")}}}]},offlineSessionActions:function(){var e=this;return[{title:this.$t("sessions.replaySession"),attrs:{type:"primary",label:this.$t("sessions.replay"),disabled:!this.session["can_replay"]||!e.$hasPerm("terminal.view_sessionreplay")},callbacks:{click:function(){var s="/luna/replay/"+e.session.id;window.open(s)}}},{title:this.$t("sessions.downloadReplay"),attrs:{type:"primary",label:this.$t("sessions.download"),disabled:!this.session["can_replay"]||!e.$hasPerm("terminal.download_sessionreplay")},callbacks:{click:function(){var s="/api/v1/terminal/sessions/".concat(e.session.id,"/replay/download/");window.open(s)}}}]},detailItems:function(){return[{key:this.$t("sessions.user"),value:this.session.user},{key:this.$t("sessions.asset"),value:this.session.asset},{key:this.$t("sessions.systemUser"),value:this.session.system_user},{key:this.$t("sessions.protocol"),value:this.session.protocol},{key:this.$t("sessions.loginFrom"),value:this.session.login_from},{key:this.$t("sessions.remoteAddr"),value:this.session.remote_addr},{key:this.$t("sessions.dateStart"),value:Object(u["q"])(this.session.date_start)},{key:this.$t("sessions.dateEnd"),value:this.session.date_end?Object(u["q"])(this.session.date_end):""}]},quickActions:function(){var e=this;return e.session.is_finished?this.offlineSessionActions:this.onlineSessionActions}}},j=w,$=Object(h["a"])(j,b,v,!1,null,"00318741",null),k=$.exports,S=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},x=[],A={name:"SessionJoinRecords",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){return{tableConfig:{url:"/api/v1/terminal/session-join-records/?session=".concat(this.object.id),columns:["joiner_display","verify_code","reason","is_success","is_finished","date_joined","date_left","org_name"],columnsShow:{min:["joiner_display","is_success","reason"],default:["joiner_display","verify_code","is_success","reason","is_finished","date_joined","date_left"]},columnsMeta:{is_finished:{width:"150px",formatterArgs:{showFalse:!1}}}},headerActions:{hasImport:!1,hasLeftActions:!1,searchConfig:{exclude:["date_joined","date_left"]}}}}},O=A,D=Object(h["a"])(O,S,x,!1,null,"0dbb82ac",null),C=D.exports,M={name:"SessionDetail",components:{GenericDetailPage:a["e"],SessionCommands:f,SessionDetailInfo:k,SessionJoinRecords:C},data:function(){var e=this;return{sessionData:{},url:"/api/v1/terminal/sessions",activeSubMenu:"SessionDetailInfo",submenu:[{title:this.$t("route.Detail"),name:"SessionDetailInfo"},{title:this.$t("sessions.command"),name:"SessionCommands",hidden:function(){return!e.$hasPerm("terminal.view_command")}},{title:this.$t("sessions.Activity"),name:"SessionJoinRecords",hidden:function(){return!e.$hasPerm("terminal.view_sessionjoinrecord")}}]}},methods:{getSessionName:function(){return this.sessionData.id}}},I=M,E=Object(h["a"])(I,n,i,!1,null,"2a3f3620",null);s["default"]=E.exports},d58a:function(e,s,t){"use strict";var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("pre",{staticStyle:{border:"none",background:"none","white-space":"pre-wrap","word-wrap":"break-word",padding:"10px 20px"}},[e._v(e._s("$ "+e.row.input)+"\n"),t("br"),e._v("\n"+e._s(e.row.output)+"\n  ")])},i=[],a=t("bb1a"),o={name:"OutputExpandFormatter",extends:a["a"]},r=o,c=t("2877"),l=Object(c["a"])(r,n,i,!1,null,"2c7c92c8",null),u=l.exports;t.d(s,"a",(function(){return u}))},d952:function(e,s,t){"use strict";t.d(s,"g",(function(){return i})),t.d(s,"e",(function(){return a})),t.d(s,"f",(function(){return o})),t.d(s,"c",(function(){return r})),t.d(s,"d",(function(){return c})),t.d(s,"a",(function(){return u})),t.d(s,"b",(function(){return d}));var n=t("b775");function i(e){return Object(n["a"])({url:"/api/v1/terminal/tasks/kill-session/",method:"post",data:e})}function a(){return Object(n["a"])({url:"/api/v1/terminal/command-storages/",method:"get"})}function o(){return Object(n["a"])({url:"/api/v1/terminal/replay-storages/",method:"get"})}function r(e){return Object(n["a"])({url:"/api/v1/terminal/command-storages/".concat(e,"/test-connective/"),method:"get"})}function c(e){return Object(n["a"])({url:"/api/v1/terminal/replay-storages/".concat(e,"/test-connective/"),method:"get"})}function l(e){return Object(n["a"])({url:e,method:"patch",data:{is_default:!0}})}function u(e){return l("/api/v1/terminal/command-storages/".concat(e,"/"))}function d(e){return l("/api/v1/terminal/replay-storages/".concat(e,"/"))}}}]);