(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d23014d"],{eb82:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("GenericCreateUpdatePage",e._b({on:{getObjectDone:e.afterGetUser}},"GenericCreateUpdatePage",e.$data,!1))},o=[],a=(r("1c01"),r("58b2"),r("8e6e"),r("f3e2"),r("d25f"),r("ac6a"),r("456d"),r("57e7"),r("bd86")),n=(r("7f7f"),r("cd4a")),u=r("2c41"),i=r("7541"),d=r("2f62");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={components:{GenericCreateUpdatePage:n["d"]},data:function(){var e=this;return{initial:{},user:{can_public_key_auth:!1},fields:[[this.$t("users.Account"),["name","username","email","groups"]],[this.$t("users.Authentication"),["password_strategy","update_password","password","need_update_password","set_public_key","public_key","mfa_level","source"]],[this.$t("users.Secure"),["system_roles","org_roles","is_active","date_expired"]],[this.$t("common.Other"),["phone","wechat","comment"]]],url:"/api/v1/users/users/",fieldsMeta:{password_strategy:{hidden:function(t){return e.$route.params.id||"local"!==t.source}},email:{rules:[i["d"].EmailCheck,i["d"].Required]},update_password:{label:this.$t("users.UpdatePassword"),type:"checkbox",hidden:function(t){return!!t.update_password||("update"!==e.$route.meta.action||"local"!==t.source)}},password:{component:u["a"],hidden:function(e){return"custom"!==e.password_strategy&&!e.update_password},el:{required:!1,userIsOrgAdmin:!1}},need_update_password:{type:"checkbox-group",component:null,el:{style:"margin-top: -20px;margin-bottom: -10px"},options:[{label:!0,value:this.$t("users.needUpdatePasswordNextLogin")}],hidden:function(t){return"custom"!==t.password_strategy&&(!t.update_password||!e.user.can_public_key_auth)}},set_public_key:{label:this.$t("users.SetPublicKey"),type:"checkbox",hidden:function(t){return!!t.set_public_key||"update"!==e.$route.meta.action}},public_key:{type:"input",el:{type:"textarea"},hidden:function(e){return!e.set_public_key}},system_roles:{label:this.$t("users.SystemRoles"),el:{multiple:!0,ajax:{url:"/api/v1/rbac/system-roles/",transformOption:function(e){return"SystemComponent"!==e.name&&{label:e.display_name,value:e.id}}}},hidden:function(){return!e.$hasPerm("rbac.add_systemrolebinding")},value:[]},org_roles:{rules:this.$store.getters.currentOrgIsRoot?[]:[i["d"].RequiredChange],el:{multiple:!0,ajax:{url:"/api/v1/rbac/org-roles/",transformOption:function(e){return{label:e.display_name,value:e.id}}},disabled:this.$store.getters.currentOrgIsRoot,value:[]},hidden:function(){return!e.$store.getters.hasValidLicense||!e.$hasPerm("rbac.add_orgrolebinding")||e.$store.getters.currentOrgIsRoot},helpText:this.$t("users.HelpText.OrgRoleHelpText")},groups:{el:{multiple:!0,ajax:{url:"/api/v1/users/groups/"},value:[]}}},submitMethod:function(){var e=this.$route.params;return e.id?"put":"post"},cleanFormValue:function(e){var t=this.submitMethod();return"post"===t&&"email"===e.password_strategy&&(delete e["password"],this.currentOrgIsRoot&&delete e["groups"]),void 0!==e.update_password&&delete e.update_password,e}}},computed:l({},Object(d["b"])(["currentOrgIsRoot"])),mounted:function(){this.currentOrgIsRoot&&(this.fieldsMeta.groups.el.disabled=!0)},methods:{afterGetUser:function(e){this.user=e,this.fieldsMeta.password.el.userIsOrgAdmin="Admin"===e.role||-1!==e.org_roles.indexOf("Admin"),this.$route.query.clone_from&&(this.user.groups=[])}}},m=p,b=r("2877"),h=Object(b["a"])(m,s,o,!1,null,"9c1e7f46",null);t["default"]=h.exports}}]);