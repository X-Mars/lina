(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b51f6c2"],{"3cc2":function(e,t,s){},"680d":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("GenericTreeListPage",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions,"tree-setting":e.treeSetting}}),e._v(" "),s("PermBulkUpdateDialog",e._b({attrs:{visible:e.updateSelectedDialogSetting.visible},on:{"update:visible":function(t){return e.$set(e.updateSelectedDialogSetting,"visible",t)}}},"PermBulkUpdateDialog",e.updateSelectedDialogSetting,!1))],1)},a=[],i=(s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("d25f"),s("ac6a"),s("456d"),s("bd86")),n=s("fbde"),o=s("e975"),l=s("d240"),c=s("2f62");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={components:{GenericTreeListPage:n["a"],PermBulkUpdateDialog:l["a"]},data:function(){var e=this,t=this;return{treeSetting:{showMenu:!1,showRefresh:!0,showAssets:!0,url:"/api/v1/perms/asset-permissions/",nodeUrl:"/api/v1/perms/asset-permissions/",treeUrl:"/api/v1/assets/nodes/children/tree/?assets=1"},tableConfig:{url:"/api/v1/perms/asset-permissions/",hasTree:!0,columns:["name","users_amount","user_groups_amount","assets_amount","nodes_amount","system_users_amount","date_expired","is_valid","is_expired","is_active","from_ticket","created_by","date_created","comment","org_name","actions"],columnsShow:{min:["name","actions"],default:["name","users_amount","user_groups_amount","assets_amount","nodes_amount","system_users_amount","is_valid","actions"]},columnsMeta:{name:{formatterArgs:{routeQuery:{activeTab:"AssetPermissionDetail"}},showOverflowTooltip:!0},users_amount:{label:this.$t("perms.User"),width:"60px",formatter:o["f"],formatterArgs:{routeQuery:{activeTab:"AssetPermissionUser"}}},from_ticket:{label:this.$t("perms.fromTicket"),width:100,formatterArgs:{showFalse:!1}},user_groups_amount:{label:this.$t("perms.UserGroups"),width:"100px",formatter:o["f"],formatterArgs:{routeQuery:{activeTab:"AssetPermissionUser"}}},assets_amount:{label:this.$t("perms.Asset"),width:"60px",formatter:o["f"],formatterArgs:{routeQuery:{activeTab:"AssetPermissionAsset"}}},nodes_amount:{label:this.$t("perms.Node"),width:"60px",formatter:o["f"],formatterArgs:{routeQuery:{activeTab:"AssetPermissionAsset"}}},system_users_amount:{label:this.$t("perms.SystemUser"),width:"100px",formatter:o["f"],formatterArgs:{routeQuery:{activeTab:"AssetPermissionAsset"}}},actions:{formatterArgs:{updateRoute:"AssetPermissionUpdate",performDelete:function(t){var s=t.row,r=(t.col,s.id),a="/api/v1/perms/asset-permissions/".concat(r,"/");return e.$axios.delete(a)}}}}},headerActions:{hasBulkDelete:!0,createRoute:function(){return{name:"AssetPermissionCreate",query:this.$route.query}},createInNewPage:!0,searchConfig:{url:"",options:[{label:this.$t("common.Name"),value:"name"},{label:this.$t("perms.isValid"),value:"is_valid",children:[{value:"1",label:this.$t("common.Yes")},{value:"0",label:this.$t("common.No")}]},{label:this.$t("perms.fromTicket"),value:"from_ticket",children:[{value:"1",label:this.$t("common.Yes")},{value:"0",label:this.$t("common.No")}]},{label:this.$t("perms.isEffective"),value:"is_effective",children:[{value:"1",label:this.$t("common.Yes")},{value:"0",label:this.$t("common.No")}]},{label:this.$t("common.Username"),value:"username"},{label:this.$t("perms.UserGroups"),value:"user_group"},{label:this.$t("perms.IP"),value:"ip"},{label:this.$t("perms.hostName"),value:"hostname"},{label:this.$t("perms.SystemUser"),value:"system_user"},{label:this.$t("perms.Inherit"),value:"all",children:[{value:"1",label:this.$t("perms.Include")},{value:"0",label:this.$t("perms.Exclude")}]}]},hasBulkUpdate:!1,extraMoreActions:[{name:"actionUpdateSelected",title:this.$t("common.updateSelected"),can:function(e){var s=e.selectedRows;return s.length>0&&!t.currentOrgIsRoot&&t.$hasPerm("perms.change_assetpermission")},callback:function(e){var s=e.selectedRows;t.updateSelectedDialogSetting.selectedRows=s,t.updateSelectedDialogSetting.visible=!0}}]},updateSelectedDialogSetting:{visible:!1,selectedRows:[]}}},computed:d({},Object(c["b"])(["currentOrgIsRoot"])),methods:{}},m=p,h=s("2877"),f=Object(h["a"])(m,r,a,!1,null,null,null);t["default"]=f.exports},c0eb:function(e,t,s){"use strict";var r=s("1157"),a=s.n(r);window.$=a.a,window.jQuery=a.a,t["a"]=a.a},ce4b:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-tree",e._b({attrs:{data:e.iData,"show-checkbox":"","node-key":"id","default-expand-all":!0,"default-checked-keys":e.value,props:e.defaultProps},on:{check:e.handleCheckChange}},"el-tree",e.$attrs,!1))},a=[],i=(s("6762"),s("2fdb"),s("ac4d"),s("8a81"),s("ac6a"),s("6d67"),{name:"PermissionFormActionField",props:{value:{type:Array,default:function(){return[]}},choices:{type:Array,default:function(){return[]}},actions:{type:Array,default:function(){return[]}}},data:function(){return{defaultProps:{children:"children",label:"label"},fullChoicesTreeNodes:[{id:"all",label:this.$t("perms.all"),children:[{id:"connect",label:this.$t("perms.connect")},{id:"updownload",label:this.$t("perms.upDownload"),children:[{id:"upload_file",label:this.$t("perms.uploadFile")},{id:"download_file",label:this.$t("perms.downloadFile")}]},{id:"clipboard_copy_paste",label:this.$t("perms.clipboardCopyPaste"),children:[{id:"clipboard_copy",label:this.$t("perms.clipboardCopy")},{id:"clipboard_paste",label:this.$t("perms.clipboardPaste")}]}]}]}},computed:{choicesIDs:function(){return 0!==this.actions.length?this.actions:0===this.choices.length?["all","connect","upload_file","download_file","updownload","clipboard_copy_paste","clipboard_copy","clipboard_paste"]:this.choices.map((function(e){return e.value}))},iData:function(){this.$log.debug("choices: ",this.choicesIDs);var e=_.cloneDeep(this.fullChoicesTreeNodes),t=this.trimChoicesTreeNodes(e);return this.$log.debug("choicesTreeNodes: ",t),t}},methods:{trimChoicesTreeNodes:function(e){var t=[],s=!0,r=!1,a=void 0;try{for(var i,n=e[Symbol.iterator]();!(s=(i=n.next()).done);s=!0){var o=i.value;if(this.choicesIDs.includes(o.id)){var l=o.children||[];0!==l.length&&(l=this.trimChoicesTreeNodes(l),o.children=l),t.push(o)}}}catch(c){r=!0,a=c}finally{try{s||null==n.return||n.return()}finally{if(r)throw a}}return t},handleCheckChange:function(e,t){var s=t.checkedKeys;0!==s.length&&s.push("connect"),this.$emit("input",s)}}}),n=i,o=s("2877"),l=Object(o["a"])(n,r,a,!1,null,"2d0b5919",null);t["a"]=l.exports},d240:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.visible?s("GenericUpdateFormDialog",e._g({attrs:{"selected-rows":e.selectedRows,"form-setting":e.formSetting,visible:e.visible}},e.$listeners)):e._e()},a=[],i=(s("d92a"),s("cd4a")),n=(s("7f7f"),s("1e0c")),o=s("ce4b");function l(){var e={label:this.$t("users.Users"),hidden:function(){return!1},el:{value:[],ajax:{url:"/api/v1/users/users/?fields_size=mini",transformOption:function(e){return{label:e.name+"("+e.username+")",value:e.id}}}}},t={label:this.$t("users.UserGroups"),hidden:function(){return!1},el:{value:[],url:"/api/v1/users/groups/"}},s={type:"assetSelect",hidden:function(){return!1},component:n["a"],label:this.$t("perms.Asset"),rules:[{required:!1}],el:{value:[]}},r={label:this.$t("perms.Node"),hidden:function(){return!1},el:{value:[],ajax:{url:"/api/v1/assets/nodes/",transformOption:function(e){return{label:e.full_value,value:e.id}}}}},a={label:this.$t("perms.SystemUser"),hidden:function(){return!1},el:{value:[],ajax:{url:"/api/v1/assets/system-users/?protocol__in=rdp,ssh,vnc,telnet",transformOption:function(e){var t=e.username||"*";return{label:e.name+"("+t+")",value:e.id}}}}},i={label:this.$t("perms.Actions"),hidden:function(){return!1},component:o["a"],helpText:this.$t("common.actionsTips")},l={label:this.$t("common.dateStart"),hidden:function(){return!1}},c={label:this.$t("common.dateExpired"),hidden:function(){return!1}},u={label:this.$t("assets.IsActive"),type:"checkbox"},d={label:this.$t("assets.Applications"),hidden:function(){return!1},el:{value:[],ajax:{url:"/api/v1/applications/applications/",transformOption:function(e){return{label:e.name+" ("+e.type_display+")",value:e.id}}}}};return{users:e,user_groups:t,assets:s,applications:d,nodes:r,system_users:a,actions:i,is_active:u,date_start:l,date_expired:c}}var c=l,u={name:"PermBulkUpdateDialog",components:{GenericUpdateFormDialog:i["i"]},props:{permType:{type:String,default:"asset"},visible:{type:Boolean,default:!1},selectedRows:{type:Array,default:function(){return[]}}},data:function(){return{formSetting:{url:"",hasSaveContinue:!1,initial:{},fields:[],fieldsMeta:{}}}},created:function(){this.init()},methods:{init:function(){var e,t=c.bind(this)(),s=["users","user_groups","system_users","actions","is_active","date_start","date_expired"],r={users:t.users,user_groups:t.user_groups,system_users:t.system_users,actions:t.actions,date_start:t.date_start,date_expired:t.date_expired,is_active:t.is_active};"asset"!==this.permType?(e="/api/v1/perms/application-permissions/",s.splice(2,0,"applications"),Object.assign(r,{applications:t.applications})):(e="/api/v1/perms/asset-permissions/",s.splice.apply(s,[2,0].concat(["assets","nodes"])),Object.assign(r,{assets:t.assets,nodes:t.nodes})),this.$data.formSetting.url=e,this.$data.formSetting.fields=s,this.$data.formSetting.fieldsMeta=r}}},d=u,p=s("2877"),m=Object(p["a"])(d,r,a,!1,null,"5b32989a",null);t["a"]=m.exports},fbde:function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Page",e._b({},"Page",e.$attrs,!1),[s("TreeTable",e._g(e._b({ref:"TreeTable",scopedSlots:e._u([{key:"table",fn:function(){return[e._t("table")]},proxy:!0},{key:"rMenu",fn:function(t){var r=t.data;return s("div",{},[e._t("rMenu",null,{data:r})],2)}}],null,!0)},"TreeTable",e.$attrs,!1),e.$listeners))],1)},a=[],i=(s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("d25f"),s("ac6a"),s("456d"),s("bd86")),n=s("83b2"),o=s("8ad4"),l=s("2f62");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"GenericTreeListPage",components:{Page:n["a"],TreeTable:o["a"]},computed:u({},Object(l["b"])(["currentOrgIsRoot"])),created:function(){var e=this.$attrs["header-actions"]||{};void 0===e.canCreate&&this.currentOrgIsRoot&&_.set(this.$attrs,"header-actions.canCreate",!1),void 0===e.hasImport&&this.currentOrgIsRoot&&_.set(this.$attrs,"header-actions.hasImport",!1)},methods:{hideRMenu:function(){this.$refs.TreeTable.hideRMenu()},getSelectedNodes:function(){return this.$refs.TreeTable.getSelectedNodes()},getNodes:function(){return this.$refs.TreeTable.getNodes()},selectNode:function(e){return this.$refs.TreeTable.selectNode(e)}}},p=d,m=s("2877"),h=Object(m["a"])(p,r,a,!1,null,"e5ee6c70",null);t["a"]=h.exports}}]);