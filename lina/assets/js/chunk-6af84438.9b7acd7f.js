(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6af84438","chunk-2d0a40b7"],{"0584":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GenericListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},a=[],i=s("3758"),n=s("e975"),o={components:{GenericListTable:i["a"]},data:function(){var e=this;return{tableConfig:{url:"/api/v1/acls/login-acls/?user=".concat(this.$route.params.id),columns:["name","reviewers","priority","user_display","action","is_active","comment","actions"],columnsShow:{min:["name","actions"],default:["name","priority","is_active","user_display","action","comment","actions"]},columnsMeta:{name:{formatterArgs:{route:"UserLoginACLDetail",routeQuery:{user:this.$route.params.id}}},ip_group:{formatter:n["b"],showOverflowTooltip:!0},action:{prop:"action_display"},reviewers:{prop:"reviewers_amount"},actions:{formatterArgs:{hasClone:!1,updateRoute:{name:"UserLoginACLUpdate",query:{user:this.$route.params.id}},performDelete:function(t){var s=t.row,r=(t.col,s.id),a="/api/v1/acls/login-acls/".concat(r,"/?user=").concat(e.$route.params.id);return e.$axios.delete(a)}}}}},headerActions:{createRoute:{name:"UserLoginACLCreate",query:{user:this.$route.params.id}},hasRefresh:!0,hasExport:!1,hasImport:!1,hasMoreActions:!1}}}},c=o,u=s("2877"),l=Object(u["a"])(c,r,a,!1,null,null,null);t["default"]=l.exports},"10b5":function(e,t,s){},"3cc2":function(e,t,s){},"66ce":function(e,t,s){"use strict";var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("TreeTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions,"tree-setting":e.treeSetting}})},a=[],i=(s("57e7"),s("d92a"),s("a481"),s("e975")),n=s("8ad4"),o={name:"GrantedAssets",components:{TreeTable:n["a"]},props:{treeUrl:{type:String,required:!0},tableUrl:{type:String,required:!0},onSelected:{type:Function,default:function(e,t){t.tableConfig.initialUrl||(t.tableConfig.initialUrl=t.tableConfig.url);var s=t.tableConfig.initialUrl,r=e.meta.data.id,a=s.replace("/assets/","/nodes/".concat(r,"/assets/"));t.tableConfig.url=a}},getShowUrl:{type:Function,default:function(e){var t=e.row;e.col;return this.tableUrl.replace("/assets/","/assets/".concat(t.id,"/system-users/?cache_policy=1"))}}},data:function(){var e=this;return{treeSetting:{showMenu:!1,showRefresh:!0,showAssets:!1,url:this.tableUrl,treeUrl:this.treeUrl,callback:{onSelected:function(t,s){return e.onSelected(s,e)},refresh:e.refreshObjectAssetPermission}},tableConfig:{url:this.tableUrl,hasTree:!0,columns:[{prop:"hostname",label:this.$t("assets.Hostname"),formatter:i["f"],sortable:!0,formatterArgs:{route:"AssetDetail"},showOverflowTooltip:!0},{prop:"ip",label:this.$t("assets.IP"),width:"140px",sortable:"custom"},{prop:"systemUsers",label:this.$t("assets.SystemUsers"),align:"center",formatter:i["l"],formatterArgs:{getUrl:this.getShowUrl.bind(this)},showOverflowTooltip:!0}]},headerActions:{hasLeftActions:!1,hasExport:!1,hasImport:!1}}},methods:{refreshObjectAssetPermission:function(){var e=this.tableUrl.replace("/assets/","/asset-permissions/cache/");return!e.indexOf("user-groups")&&this.$axios.delete(e)}}},c=o,u=s("2877"),l=Object(u["a"])(c,r,a,!1,null,"47c190d1",null);t["a"]=l.exports},c0eb:function(e,t,s){"use strict";var r=s("1157"),a=s.n(r);window.$=a.a,window.jQuery=a.a,t["a"]=a.a},dd3c:function(e,t,s){"use strict";var r=s("10b5"),a=s.n(r);a.a},eea5:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GenericDetailPage",e._g(e._b({attrs:{object:e.user,"active-menu":e.config.activeMenu},on:{"update:object":function(t){e.user=t},"update:activeMenu":function(t){return e.$set(e.config,"activeMenu",t)},"update:active-menu":function(t){return e.$set(e.config,"activeMenu",t)}}},"GenericDetailPage",e.config,!1),e.$listeners),[s("keep-alive",[s(e.config.activeMenu,{tag:"component",attrs:{object:e.user}})],1)],1)},a=[],i=s("cd4a"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},o=[],c=s("579c"),u=s("e975"),l={name:"UserAssetPermission",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){var e=this,t=this;return{tableConfig:{url:"/api/v1/perms/asset-permissions/?user_id=".concat(this.object.id),hasSelection:!1,hasTree:!0,columns:["name","users_amount","user_groups_amount","assets_amount","nodes_amount","system_users_amount","is_valid","actions"],columnsMeta:{name:{formatter:u["f"],formatterArgs:{route:"AssetPermissionDetail"}},users_amount:{label:this.$t("perms.User"),width:"110px",formatter:u["f"],formatterArgs:{route:"AssetPermissionDetail",routeQuery:{activeTab:"AssetPermissionUser"}}},user_groups_amount:{label:this.$t("perms.UserGroups"),width:"110px"},assets_amount:{label:this.$t("perms.Asset"),width:"110px",formatter:u["f"],formatterArgs:{route:"AssetPermissionDetail",routeQuery:{activeTab:"AssetPermissionAsset"}}},nodes_amount:{label:this.$t("perms.Node"),width:"110px"},system_users_amount:{label:this.$t("perms.SystemUser"),width:"110px"},actions:{formatterArgs:{canClone:t.$hasPerm("perms.add_assetpermission"),cloneRoute:{name:"AssetPermissionCreate"},updateRoute:"AssetPermissionUpdate",canUpdate:t.$hasPerm("perms.change_assetpermission"),canDelete:t.$hasPerm("perms.delete_assetpermission"),performDelete:function(t){var s=t.row,r=(t.col,s.id),a="/api/v1/perms/asset-permissions/".concat(r,"/?user_id=").concat(e.object.id,"&draw=1");return e.$axios.delete(a)}}}}},headerActions:{hasLeftActions:!1,hasExport:!1,hasImport:!1,searchConfig:{url:"",options:[{label:this.$t("common.Name"),value:"name"},{label:this.$t("perms.isValid"),value:"is_valid",children:[{value:"1",label:this.$t("common.Yes")},{value:"0",label:this.$t("common.No")}]},{label:this.$t("common.Username"),value:"username"},{label:this.$t("perms.UserGroups"),value:"user_group"},{label:this.$t("perms.IP"),value:"ip"},{label:this.$t("perms.hostName"),value:"hostname"},{label:this.$t("perms.Node"),value:"node"},{label:this.$t("perms.SystemUser"),value:"system_user"},{label:this.$t("perms.Inherit"),value:"all",children:[{value:"1",label:this.$t("perms.Include")},{value:"0",label:this.$t("perms.Exclude")}]}]}}}}},p=l,m=s("2877"),d=Object(m["a"])(p,n,o,!1,null,"3953b7f2",null),h=d.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("GrantedAssets",{attrs:{"tree-url":e.treeUrl,"table-url":e.tableUrl}})},b=[],g=s("66ce"),v={name:"UserGrantedAssets",components:{GrantedAssets:g["a"]},props:{object:{type:Object,required:!0}},data:function(){return{treeUrl:"/api/v1/perms/users/".concat(this.object.id,"/nodes/children/tree/?cache_policy=1"),tableUrl:"/api/v1/perms/users/".concat(this.object.id,"/assets/?cache_policy=1&all=1")}}},$=v,_=Object(m["a"])($,f,b,!1,null,"4d03675b",null),y=_.exports,w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},A=[],U={name:"UserGrantedApplications",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){return{tableConfig:{url:"/api/v1/perms/users/".concat(this.object.id,"/applications/"),columns:["name","category_display","type","asset","comment"],columnsMeta:{name:{formatterArgs:{can:this.$hasPerm("applications.view_application"),route:"RemoteAppDetail"}},type:{displayKey:"type_display",width:"140px"},asset:{label:this.$t("assets.Asset"),formatter:function(e){return e.attrs.host||e.attrs.hostname}}}},headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1}}}},j=U,k=Object(m["a"])(j,w,A,!1,null,"5ec5ac32",null),x=k.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ListTable",{attrs:{"table-config":e.tableConfig,"header-actions":e.headerActions}})},P=[],L={name:"UserRemoteAppPermissionRules",components:{ListTable:c["a"]},props:{object:{type:Object,required:!0}},data:function(){var e=this,t=this;return{tableConfig:{url:"/api/v1/perms/application-permissions/?user_id=".concat(this.object.id,"&draw=1"),columns:["name","category_display","users_amount","user_groups_amount","applications_amount","system_users_amount","is_valid","actions"],columnsMeta:{name:{formatterArgs:{route:"ApplicationPermissionDetail"},showOverflowTooltip:!0},users_amount:{label:this.$t("users.Users"),width:"110px"},user_groups_amount:{label:this.$t("users.UserGroups"),width:"110px"},applications_amount:{label:this.$t("assets.Applications"),width:"110px"},system_users_amount:{label:this.$t("assets.SystemUsers"),width:"110px"},actions:{formatterArgs:{canUpdate:t.$hasPerm("perms.change_applicationpermission"),onUpdate:function(t){var s=t.row,r=(t.col,t.cellValue,{name:"ApplicationPermissionUpdate",params:{id:s.id},query:{type:s.type,category:s.category}});e.$router.push(r)},canDelete:t.$hasPerm("perms.delete_applicationpermission"),performDelete:function(t){var s=t.row,r=(t.col,s.id),a="/api/v1/perms/application-permissions/".concat(r,"/?user_id=").concat(e.object.id,"&draw=1");return e.$axios.delete(a)},canClone:t.$hasPerm("perms.add_applicationpermission"),onClone:function(t){var s=t.row,r={name:"ApplicationPermissionCreate",query:{type:s.type,category:s.category,clone_from:s.id}};e.$router.push(r)}}}}},headerActions:{hasLeftActions:!1,hasImport:!1,hasExport:!1}}}},q=L,O=Object(m["a"])(q,C,P,!1,null,"3b498122",null),S=O.exports,M=s("0584"),R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{md:14,sm:24}},[s("DetailCard",{attrs:{items:e.detailItems}})],1),e._v(" "),s("el-col",{attrs:{md:10,sm:24}},[s("QuickActions",{attrs:{actions:e.quickActions,type:"primary"}}),e._v(" "),s("RelationCard",e._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RelationCard",e.relationConfig,!1))],1)],1)},D=[],T=(s("28a5"),s("7f7f"),s("6d67"),s("96cf"),s("3b8d")),I=s("b97b"),G=s("8c34"),E=s("58fd"),B=s("cf45"),F={name:"UserInfo",components:{DetailCard:I["a"],RelationCard:E["a"],QuickActions:G["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){var e=this,t=this;return{quickActions:[{title:this.$t("common.Activate"),type:"switcher",attrs:{model:this.object.is_active,disabled:!t.$hasPerm("users.change_user")},callbacks:{change:function(e,s){var r="/api/v1/users/users/".concat(t.object.id,"/"),a={is_active:e};t.$axios.patch(r,a).catch((function(){s.attrs.model=!e})).then((function(e){t.$message.success(t.$t("common.updateSuccessMsg"))})).catch((function(e){t.$message.error(t.$t("common.updateErrorMsg "+e))}))}}},{title:this.$t("users.quickUpdate.resetMFA"),attrs:{type:"primary",disabled:!t.$hasPerm("users.change_user"),label:this.$t("common.Reset")},callbacks:{click:function(){var e=t.$t("users.quickUpdate.resetMFAWarningMsg"),s=t.$t("common.Info"),r="/api/v1/users/users/".concat(t.object.id,"/mfa/reset/"),a=t.$t("users.quickUpdate.resetMFAdSuccessMsg");t.$confirm(e,s,{type:"warning",confirmButtonClass:"el-button--warning",showCancelButton:!0,beforeClose:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(s,i,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"===s){e.next=2;break}return e.abrupt("return",n());case 2:return i.confirmButtonLoading=!0,e.prev=3,e.next=6,t.$axios.get(r);case 6:n(),t.$message.success(a);case 8:return e.prev=8,i.confirmButtonLoading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[3,,8,11]])})));function s(t,s,r){return e.apply(this,arguments)}return s}()})}}},{title:this.$t("users.quickUpdate.resetPassword"),attrs:{type:"primary",disabled:"local"!==this.object.source||!t.$hasPerm("users.change_user"),label:this.$t("users.quickUpdate.send")},callbacks:{click:function(){var e=t.$t("users.quickUpdate.resetPasswordWarningMsg"),s=t.$t("common.Info"),r="/api/v1/users/users/".concat(t.object.id,"/password/reset/"),a=t.$t("users.quickUpdate.resetPasswordSuccessMsg");t.$confirm(e,s,{type:"warning",confirmButtonClass:"el-button--warning",showCancelButton:!0,beforeClose:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(s,i,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"===s){e.next=2;break}return e.abrupt("return",n());case 2:return i.confirmButtonLoading=!0,e.prev=3,e.next=6,t.$axios.patch(r,{});case 6:n(),t.$message.success(a);case 8:return e.prev=8,i.confirmButtonLoading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[3,,8,11]])})));function s(t,s,r){return e.apply(this,arguments)}return s}()})}}},{title:this.$t("users.quickUpdate.resetSSHKey"),attrs:{type:"primary",disabled:!this.$store.state.users.profile.can_public_key_auth||!t.$hasPerm("users.change_user"),label:this.$t("users.quickUpdate.send")},callbacks:{click:function(){var e=t.$t("users.quickUpdate.resetSSHKeyWarningMsg"),s=t.$t("common.Info"),r="/api/v1/users/users/".concat(t.object.id,"/pubkey/reset/"),a=t.$t("users.quickUpdate.resetSSHKeySuccessMsg");t.$confirm(e,s,{type:"warning",confirmButtonClass:"el-button--warning",showCancelButton:!0,beforeClose:function(){var e=Object(T["a"])(regeneratorRuntime.mark((function e(s,i,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("confirm"===s){e.next=2;break}return e.abrupt("return",n());case 2:return i.confirmButtonLoading=!0,e.prev=3,e.next=6,t.$axios.patch(r,{});case 6:n(),t.$message.success(a);case 8:return e.prev=8,i.confirmButtonLoading=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[3,,8,11]])})));function s(t,s,r){return e.apply(this,arguments)}return s}()})}}},{title:this.$t("users.quickUpdate.unblockUser"),attrs:{type:"primary",label:this.$t("users.quickUpdate.unblock"),disabled:!this.object.login_blocked||!t.$hasPerm("users.change_user")},callbacks:{click:function(e,s){var r="/api/v1/users/users/".concat(t.object.id,"/unblock/"),a=t.$t("users.quickUpdate.unblockSuccessMsg");t.$axios.patch(r).then((function(){s.attrs.disabled=!s.attrs.disabled,t.$message.success(a)}))}}}],relationConfig:{icon:"fa-user",title:this.$t("users.UserGroups"),objectsAjax:{url:"/api/v1/users/groups/?fields_size=mini&order=name"},hasObjectsId:this.object.groups,performDelete:function(t){var s=t.value,r=e.object.id,a="/api/v1/users/users-groups-relations/?user=".concat(r,"&usergroup=").concat(s);return e.$axios.delete(a)},performAdd:function(t){var s="/api/v1/users/users-groups-relations/",r=e.object.id,a=t.map((function(e){return{usergroup:e.value,user:r}}));return e.$axios.post(s,a)}}}},computed:{detailItems:function(){var e=this,t=this.$createElement;return[{key:this.$t("users.Name"),value:this.object.name},{key:this.$t("users.Username"),value:this.object.username},{key:this.$t("users.Email"),value:this.object.email},{key:this.$t("users.Phone"),value:this.object.phone},{key:this.$t("users.WeCom"),value:this.object.wecom_id},{key:this.$t("users.DingTalk"),value:this.object.dingtalk_id},{key:this.$t("users.FeiShu"),value:this.object.feishu_id},{key:this.$t("users.Role"),formatter:function(s,r){var a=e.object.org_roles_display||"",i=e.object.system_roles_display||"",n=null===a||void 0===a?void 0:a.split(", ").concat(null===i||void 0===i?void 0:i.split(", "));return t("span",[" ",n.join(" | ")," "])}},{key:this.$t("users.MFA"),value:this.object.mfa_level_display},{key:this.$t("users.Source"),value:this.object.source_display},{key:this.$t("common.CreatedBy"),value:this.object.created_by},{key:this.$t("users.DateJoined"),value:Object(B["q"])(this.object.date_joined)},{key:this.$t("users.DateExpired"),value:Object(B["q"])(this.object.date_expired)},{key:this.$t("users.DatePasswordUpdated"),value:Object(B["q"])(this.object.date_password_last_updated)},{key:this.$t("users.DateLastLogin"),value:Object(B["q"])(this.object.last_login)},{key:this.$t("common.Comment"),value:this.object.comment}]}},watch:{group:function(e,t){this.$log.debug("Group has changed"),this.relationConfig.hasObjectsId=e.users}},methods:{}},N=F,Q=(s("dd3c"),Object(m["a"])(N,R,D,!1,null,"5c3622d1",null)),H=Q.exports,K={components:{GenericDetailPage:i["e"],UserInfo:H,UserGrantedAssets:y,UserAssetPermissionRules:h,UserGrantedApplications:x,UserApplicationPermissionRules:S,UserLoginACLList:M["default"]},data:function(){var e=this;return{user:{name:"",username:"",email:"",comment:""},config:{activeMenu:"UserInfo",actions:{canUpdate:this.$hasPerm("users.change_user")},submenu:[{title:this.$t("common.BasicInfo"),name:"UserInfo"},{title:this.$t("users.tabs.grantedAssets"),name:"UserGrantedAssets",hidden:function(){return!e.$hasPerm("perms.view_userassets")}},{title:this.$t("users.tabs.assetPermissionRules"),name:"UserAssetPermissionRules",hidden:function(){return!e.$hasPerm("perms.view_assetpermission")}},{title:this.$t("users.tabs.grantedApplications"),name:"UserGrantedApplications",hidden:function(){return!e.$hasPerm("perms.view_userapps")}},{title:this.$t("users.tabs.ApplicationPermissionRules"),name:"UserApplicationPermissionRules",hidden:function(){return!e.$hasPerm("perms.view_applicationpermission")}},{title:this.$t("route.UserAclLists"),name:"UserLoginACLList",hidden:function(){return!e.$hasPerm("acls.view_loginacl")}}]}}},methods:{handleTabClick:function(e){this.$log.debug("Current nav is: ",this.config.activeMenu)}}},W=K,J=Object(m["a"])(W,r,a,!1,null,"11d5de2c",null);t["default"]=J.exports}}]);