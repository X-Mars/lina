(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230cb3"],{ee96:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("GenericDetailPage",t._g(t._b({attrs:{object:t.TaskDetail,"active-menu":t.config.activeMenu},on:{"update:object":function(e){t.TaskDetail=e},"update:activeMenu":function(e){return t.$set(t.config,"activeMenu",e)},"update:active-menu":function(e){return t.$set(t.config,"activeMenu",e)}}},"GenericDetailPage",t.config,!1),t.$listeners),[a("keep-alive",[a(t.config.activeMenu,{tag:"component",attrs:{object:t.TaskDetail}})],1)],1)},i=[],n=a("cd4a"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:14,sm:24}},[a("DetailCard",{attrs:{items:t.detailCardItems}})],1),t._v(" "),a("el-col",{attrs:{md:10,sm:24}})],1)},c=[],r=(a("7f7f"),a("b97b")),l=a("cf45"),u={name:"Detail",components:{DetailCard:r["a"]},props:{object:{type:Object,default:function(){}}},data:function(){return{}},computed:{detailCardItems:function(){return[{key:this.$t("assets.Name"),value:this.object.name},{key:this.$t("assets.Assets"),value:"".concat(this.object.asset_count)},{key:this.$t("assets.Applications"),value:"".concat(this.object.application_count)},{key:this.$t("assets.Gateway"),value:"".concat(this.object.gateway_count)},{key:this.$t("assets.date_joined"),value:Object(l["q"])(this.object.date_created)},{key:this.$t("assets.Comment"),value:this.object.comment}]}}},p=u,d=a("2877"),m=Object(d["a"])(p,o,c,!1,null,"06332292",null),h=m.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("GenericListTable",{attrs:{"table-config":t.tableConfig,"header-actions":t.headerActions}}),t._v(" "),t.dialogVisible?a("Dialog",{attrs:{title:this.$t("assets.TestGatewayTestConnection"),visible:t.dialogVisible,width:"40%",top:"35vh","show-confirm":!1,"show-cancel":!1,"destroy-on-close":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:4,sm:24}},[a("div",{staticStyle:{"line-height":"34px"}},[t._v(t._s(t.$t("assets.SshPort")))])]),t._v(" "),a("el-col",{attrs:{md:14,sm:24}},[a("el-input",{model:{value:t.portInput,callback:function(e){t.portInput=e},expression:"portInput"}}),t._v(" "),a("span",{staticClass:"help-tips help-block"},[t._v(t._s(t.$t("assets.TestGatewayHelpMessage")))])],1),t._v(" "),a("el-col",{attrs:{md:4,sm:24}},[a("el-button",{staticStyle:{"line-height":"20px"},attrs:{size:"mini",type:"primary",loading:t.buttonLoading},on:{click:t.dialogConfirm}},[t._v(t._s(this.$t("common.Confirm")))])],1)],1)],1):t._e()],1)},f=[],g=(a("d92a"),a("3758")),v=a("eaa2"),w=a("9039"),y={components:{GenericListTable:g["a"],Dialog:w["a"]},props:{object:{type:Object,default:function(){}}},data:function(){var t=this;return{tableConfig:{url:"/api/v1/assets/gateways/?domain=".concat(this.$route.params.id),columns:["name","ip","port","protocol","username","comment","actions"],columnsMeta:{name:{sortable:"custom",formatter:v["a"]},ip:{width:"140px"},port:{width:"60px"},protocol:{sortable:"custom",width:"100px"},actions:{formatterArgs:{updateRoute:"GatewayUpdate",performDelete:function(e){var a=e.row,s=(e.col,a.id),i="/api/v1/assets/gateways/".concat(s,"/");return t.$axios.delete(i)},extraActions:[{name:"TestConnection",can:this.$hasPerm("assets.test_gateway"),title:this.$t("assets.TestConnection"),callback:function(t){if(this.dialogVisible=!0,!t.row.port)return this.$message.error(this.$t("common.BadRequestErrorMsg"));this.portInput=t.row.port,this.cellValue=t.row.id}.bind(this)}],onClone:function(t){var e=t.row,a=(t.col,{name:"GatewayCreate",query:{domain:this.object.id,clone_from:e.id}});this.$router.push(a)}.bind(this)}}}},headerActions:{hasBulkUpdate:!1,hasSearch:!0,createRoute:{name:"GatewayCreate",query:{domain:this.object.id}}},dialogVisible:!1,portInput:"",cellValue:"",buttonLoading:!1}},methods:{dialogConfirm:function(){var t=this;this.buttonLoading=!0;var e=parseInt(this.portInput);if(isNaN(e))return this.buttonLoading=!1,this.$message.error(this.$t("common.TestPortErrorMsg"));this.$axios.post("/api/v1/assets/gateways/".concat(this.cellValue,"/test-connective/"),{port:e}).then((function(e){return t.$message.success(t.$t("common.TestSuccessMsg"))})).finally((function(){t.portInput="",t.cellValue="",t.buttonLoading=!1,t.dialogVisible=!1}))}}},$=y,_=Object(d["a"])($,b,f,!1,null,null,null),j=_.exports,k={components:{GenericDetailPage:n["e"],TabPage:n["m"],Detail:h,GatewayList:j},data:function(){var t=this;return{TaskDetail:{},config:{activeMenu:"Detail",submenu:[{title:this.$t("assets.DomainDetail"),name:"Detail"},{title:this.$t("assets.Gateway"),name:"GatewayList",hidden:function(){return!t.$hasPerm("assets.view_gateway")}}],hasRightSide:!0}}}},D=k,C=Object(d["a"])(D,s,i,!1,null,"627a4f54",null);e["default"]=C.exports}}]);