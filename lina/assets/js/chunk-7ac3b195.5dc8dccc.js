(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ac3b195","chunk-096fe3eb"],{"1df3":function(t,e,n){"use strict";var i=n("8383"),o=n.n(i);o.a},"4b33":function(t,e,n){},"4e82":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("IBox",t._b({attrs:{fa:t.icon,type:t.type,title:t.title}},"IBox",t.$attrs,!1),[n("table",{staticClass:"run-info"},[0===t.contents.length?n("p",[t._v(t._s(t.$t("common.Nothing")))]):t._e(),t._v(" "),t._l(t.contents,(function(e){return n("tr",{key:e.hostname},[n("td",[t._v(t._s(e.hostname))]),t._v(" "),n("td",[t._v(t._s(e.result))])])}))],2)])},o=[],s=n("e67a"),a={name:"RunInfoCard",components:{IBox:s["a"]},props:{title:{type:String,default:""},icon:{type:String,default:""},contents:{type:Array,default:function(){return[]}},url:{type:String,default:""},type:{type:String,default:"primary"}}},r=a,c=(n("e64f"),n("2877")),u=Object(c["a"])(r,i,o,!1,null,"c3747890",null);e["a"]=u.exports},8383:function(t,e,n){},a22e:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GenericDetailPage",t._g(t._b({attrs:{object:t.HistoryExecutionDetail,"active-menu":t.config.activeMenu},on:{"update:object":function(e){t.HistoryExecutionDetail=e},"update:activeMenu":function(e){return t.$set(t.config,"activeMenu",e)},"update:active-menu":function(e){return t.$set(t.config,"activeMenu",e)}}},"GenericDetailPage",t.config,!1),t.$listeners),[n("keep-alive",[n(t.config.activeMenu,{tag:"component",attrs:{object:t.HistoryExecutionDetail}})],1)],1)},o=[],s=n("cd4a"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:14,sm:24}},[n("DetailCard",{attrs:{title:t.cardTitle,items:t.detailCardItems}})],1),t._v(" "),n("el-col",{attrs:{md:10,sm:24}},[n("RunInfoCard",t._b({staticStyle:{"margin-top":"15px"},attrs:{type:"danger"}},"RunInfoCard",t.RunFailedConfig,!1)),t._v(" "),n("RunInfoCard",t._b({staticStyle:{"margin-top":"15px"},attrs:{type:"info"}},"RunInfoCard",t.RunSuccessConfig,!1))],1)],1)},r=[],c=(n("a481"),n("b97b")),u=n("cf45"),l=n("4e82"),f=n("ebab"),d=n("82a0"),p={name:"HistoryExecutionDetail",components:{DetailCard:c["a"],RunInfoCard:l["a"]},props:{object:{type:Object,default:function(){return{}}}},data:function(){return{RunSuccessConfig:{icon:"fa-info",title:this.$t("ops.lastRunSuccessHosts"),contents:Object(f["b"])(this.object)},RunFailedConfig:{icon:"fa-info",title:this.$t("ops.lastRunFailedHosts"),contents:Object(f["a"])(this.object)}}},computed:{cardTitle:function(){return"".concat(this.object.task_display.replace("@",":")).concat(this.object.adhoc_short_id)},detailCardItems:function(){var t=this.$createElement;return[{key:this.$t("ops.taskName"),value:this.object.task_display.replace("@","")},{key:this.$t("ops.version"),value:this.object.adhoc_short_id},{key:this.$t("ops.dateStart"),value:Object(u["q"])(this.object.date_start)},{key:this.$t("ops.timeDelta"),value:this.object.timedelta.toFixed(2)+"s"},{key:this.$t("ops.isFinished"),value:this.object.is_finished},{key:this.$t("ops.isSuccess"),value:this.object.is_success},{key:this.$t("ops.output"),value:this.object.id,formatter:function(e,n){var i=function(){Object(d["i"])(n,"ansible")},o=this.$t("common.View");return t("a",{on:{click:i}},[o])}}]}}},h=p,m=n("2877"),b=Object(m["a"])(h,a,r,!1,null,"57e85212",null),_=b.exports,v=n("c205"),y={components:{HistoryExecutionDetail:_,GenericDetailPage:s["e"],CeleryTaskLog:v["default"],TabPage:s["m"]},data:function(){return{HistoryExecutionDetail:{},config:{activeMenu:"HistoryExecutionDetail",title:this.$t("ops.executionDetail"),submenu:[{title:this.$t("ops.executionDetail"),name:"HistoryExecutionDetail"}],hasRightSide:!1,actions:{detailApiUrl:"/api/v1/ops/adhoc-executions/".concat(this.$route.params.id,"/")}}}}},g=y,x=Object(m["a"])(g,i,o,!1,null,"4054077b",null);e["default"]=x.exports},c205:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"terminal",staticClass:"xterm",attrs:{id:"terminal"}})},o=[],s=(n("abb2"),n("fcf3")),a=n("47d0"),r={name:"CeleryTaskLog",props:{},data:function(){return{xterm:null,ws:null,taskId:this.$route.params.id,type:this.$route.params.type||this.$route.query.type||"celery",url:"/ws/ops/tasks/log/",failOverPort:Object({VUE_APP_BASE_API:"",VUE_APP_PUBLIC_PATH:"/ui",VUE_APP_LOGIN_PATH:"/core/auth/login/",VUE_APP_LOGOUT_PATH:"/core/auth/logout/",VUE_APP_ENV:"production",NODE_ENV:"production",BASE_URL:"/ui/"}).VUE_APP_WS_PORT}},computed:{},mounted:function(){this.initTermAndWs()},beforeDestroy:function(){this.xterm.dispose()},methods:{reset:function(){this.xterm.reset()},write:function(t){this.xterm.write(t)},initTermAndWs:function(){var t=this.$refs.terminal;this.xterm=new s["Terminal"]({fontFamily:'monaco, Consolas, "Lucida Console", monospace',lineHeight:1.2,fontSize:13,rightClickSelectsWord:!0,theme:{background:"#1f1b1b"}});var e=new a["FitAddon"];this.xterm.loadAddon(e),this.xterm.open(t),e.fit(),window.onresize=function(){e.fit()},this.xterm.scrollToBottom(),this.enableWS()},enableWS:function(){var t=this,e="https:"===document.location.protocol?"wss":"ws",n=document.location.port?":"+document.location.port:"",i="/ws/ops/tasks/log/",o=e+"://"+document.location.hostname+n+i;this.ws=new WebSocket(o),this.ws.onerror=function(e){t.xterm.write(t.wrapperError("Connect websocket server error"))},this.setWsCallback()},setWsCallback:function(){var t=this;this.ws.onmessage=function(e){var n=JSON.parse(e.data);t.xterm.write(n.message)},this.ws.onopen=function(e){var n={task:t.taskId,type:t.type};t.ws.send(JSON.stringify(n))}},wrapperError:function(t){return"\r\n".concat(t,"\r\n")}}},c=r,u=(n("1df3"),n("2877")),l=Object(u["a"])(c,i,o,!1,null,"09236ef4",null);e["default"]=l.exports},e64f:function(t,e,n){"use strict";var i=n("4b33"),o=n.n(i);o.a},ebab:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));n("7f7f"),n("6d67");var i=function(t){var e=t&&t.last_success;return e instanceof Array?e.map((function(t){return{hostname:t,result:""}})):[]},o=function(t){var e=t&&t.last_failure;if(!(e instanceof Object))return[];var n=[];for(var i in e){var o=e[i],s=[];for(var a in o)s.push("".concat(a," => ").concat(o[a].msg));n.push({hostname:i,result:s.join("\n")})}return n}}}]);