(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2afa66ae"],{ce4b:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tree",e._b({attrs:{data:e.iData,"show-checkbox":"","node-key":"id","default-expand-all":!0,"default-checked-keys":e.value,props:e.defaultProps},on:{check:e.handleCheckChange}},"el-tree",e.$attrs,!1))},s=[],r=(a("6762"),a("2fdb"),a("ac4d"),a("8a81"),a("ac6a"),a("6d67"),{name:"PermissionFormActionField",props:{value:{type:Array,default:function(){return[]}},choices:{type:Array,default:function(){return[]}},actions:{type:Array,default:function(){return[]}}},data:function(){return{defaultProps:{children:"children",label:"label"},fullChoicesTreeNodes:[{id:"all",label:this.$t("perms.all"),children:[{id:"connect",label:this.$t("perms.connect")},{id:"updownload",label:this.$t("perms.upDownload"),children:[{id:"upload_file",label:this.$t("perms.uploadFile")},{id:"download_file",label:this.$t("perms.downloadFile")}]},{id:"clipboard_copy_paste",label:this.$t("perms.clipboardCopyPaste"),children:[{id:"clipboard_copy",label:this.$t("perms.clipboardCopy")},{id:"clipboard_paste",label:this.$t("perms.clipboardPaste")}]}]}]}},computed:{choicesIDs:function(){return 0!==this.actions.length?this.actions:0===this.choices.length?["all","connect","upload_file","download_file","updownload","clipboard_copy_paste","clipboard_copy","clipboard_paste"]:this.choices.map((function(e){return e.value}))},iData:function(){this.$log.debug("choices: ",this.choicesIDs);var e=_.cloneDeep(this.fullChoicesTreeNodes),t=this.trimChoicesTreeNodes(e);return this.$log.debug("choicesTreeNodes: ",t),t}},methods:{trimChoicesTreeNodes:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done);a=!0){var o=r.value;if(this.choicesIDs.includes(o.id)){var n=o.children||[];0!==n.length&&(n=this.trimChoicesTreeNodes(n),o.children=n),t.push(o)}}}catch(c){i=!0,s=c}finally{try{a||null==l.return||l.return()}finally{if(i)throw s}}return t},handleCheckChange:function(e,t){var a=t.checkedKeys;0!==a.length&&a.push("connect"),this.$emit("input",a)}}}),l=r,o=a("2877"),n=Object(o["a"])(l,i,s,!1,null,"2d0b5919",null);t["a"]=n.exports},da8f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("GenericCreateUpdatePage",{ref:"createUpdatePage",attrs:{initial:e.initial,fields:e.fields,"fields-meta":e.fieldsMeta,url:e.url}})},s=[],r=(a("6762"),a("2fdb"),a("d92a"),a("7f7f"),a("8ea5"),a("cd4a")),l=a("cf45"),o=a("ce4b"),n=["chrome","mysql_workbench","vmware_client","custom"],c={components:{GenericCreateUpdatePage:r["d"]},data:function(){var e=this.$route.query.category,t=this.$route.query.type,a="category=".concat(e,"&type=").concat(t);return{initial:{is_active:!0,date_start:(new Date).toISOString(),date_expired:Object(l["e"])(36500,new Date).toISOString(),type:t,category:e},fields:[[this.$t("common.Basic"),["name"]],[this.$t("perms.User"),["users","user_groups"]],[this.$t("assets.Applications"),["category","type","applications","system_users"]],[this.$t("common.action"),["actions"]],[this.$t("common.Other"),["is_active","date_start","date_expired","comment"]]],url:"/api/v1/perms/application-permissions/?".concat(a),createSuccessNextRoute:{name:"ApplicationPermissionDetail"},fieldsMeta:{users:{el:{value:[],ajax:{url:"/api/v1/users/users/?fields_size=mini",transformOption:function(e){return{label:e.name+"("+e.username+")",value:e.id}}}}},user_groups:{el:{value:[],url:"/api/v1/users/groups/"}},category:{type:"select",disabled:!0},type:{type:"select",disabled:!0},applications:{label:this.$t("assets.Applications"),el:{value:[],ajax:{url:"/api/v1/applications/applications/?".concat(a),transformOption:function(e){return{label:e.name+" ("+e.type_display+")",value:e.id}}}}},system_users:{el:{value:[],ajax:{url:function(){var e="/api/v1/assets/system-users/";return"remote_app"===this.$route.query.category?e+="?protocol=rdp":t&&(e+="?protocol=".concat(t)),e}.bind(this)(),transformOption:function(e){if("k8s"===t)return{label:e.name,value:e.id};var a=e.username||"*";return{label:e.name+"("+a+")",value:e.id}}}}},date_start:{label:this.$t("common.dateStart")},date_expired:{label:this.$t("common.dateExpired")},actions:{label:this.$t("perms.Actions"),component:o["a"],helpText:n.includes(t)?this.$t("common.actionsTips"):""},is_active:{type:"checkbox"}}}}},d=c,p=a("2877"),u=Object(p["a"])(d,i,s,!1,null,"350ed114",null);t["default"]=u.exports}}]);